# E-Commerce Microservices Stack
services:
  api-gateway:
    image: nginx:alpine
    container_name: shop-gateway
    ports:
      - "8080:80"
    networks:
      - frontend-tier

  product-service:
    image: node:18-alpine
    container_name: shop-products-api
    command: sleep infinity # Placeholder for long running
    networks:
      - frontend-tier
      - backend-tier

  order-service:
    image: node:18-alpine
    container_name: shop-orders-api
    command: sleep infinity
    networks:
      - backend-tier

  inventory-db:
    image: postgres:15-alpine
    container_name: shop-inventory-db
    environment:
      - POSTGRES_PASSWORD=shop
    networks:
      - data-tier

  cache:
    image: redis:alpine
    container_name: shop-shared-cache
    networks:
      - backend-tier
      - data-tier

  message-queue:
    image: rabbitmq:3-management-alpine
    container_name: shop-events-bus
    ports:
      - "15672:15672"
    networks:
      - backend-tier

networks:
  frontend-tier:
    name: shop-frontend
  backend-tier:
    name: shop-logic
  data-tier:
    name: shop-data
